# Linux的文件权限

## 查看当前目录下的文件的权限：

任意非空目录输入```ls -l```可以看到类似这样的列表

    -rwxr-xr-x.   1 root root      10999 Aug 11  2017 yumdownloader
    -rwxr-xr-x.   1 root root      11031 Aug 11  2017 yum-groups-manager
    -rwxr-xr-x.   1 root root       1941 Aug  2  2017 zcat
    -rwxr-xr-x.   1 root root       1760 Aug  2  2017 zcmp

上面的第一列，格式如```-rwxr-xr-x```的，就是对应文件的权限信息。这一部分只探讨文件的权限，其它部分不管。

就以上面显示的文件```zcat```为例，使用```stat zcat```可以看到关于这个文件的详细信息：

      File: ‘zcat’
      Size: 1941            Blocks: 8          IO Block: 4096   regular file
    Device: fd01h/64769d    Inode: 330615      Links: 1
    Access: (0755/-rwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
    Access: 2018-01-09 18:23:45.804000000 +0800
    Modify: 2017-08-02 23:49:42.000000000 +0800
    Change: 2018-01-09 18:20:46.177000000 +0800
     Birth: -

其中的```Access```一行就是文件的详细的权限信息。

## 权限分类

Linux下的权限有三种，分别是读（r）、写（w）、可执行（x）。与Windows不同，Linux不用扩展名来表示文件是否可执行，而是以权限来区分。

在系统存储时权限的信息是用二进制位来存储的。从右往左数，第一位是执行权限，第二位是写权限，第三位是读权限。假如将这三位二进制转换为十进制数，那么这个数的范围是[0, 7]，这是权限的数字表示。

    2^2 = 4 - r
    2^1 = 2 - w
    2^0 = 1 - x

使用上面的方法可以方便地对权限进行运算。

    rwx=4+2+1=7
    r-x=4+1=5
    rw-=4+2=6

## 不同级别的用户的权限

观察上面列出的表，会发现权限有三组：

> Access: (0755/-rwxr-xr-x)

也就是

    rwx | r-x | r-x

从左往右看，第一组代表文件的拥有者的权限。一般地，这个文件谁创建的谁就是拥有者，但是拥有者是可以修改的。

> Uid: (    0/    root)    Gid: (    0/    root)

示例中Uid表示的是这个文件的拥有者，Gid表示这个人属于哪一个用户组。在```ls -l```中也可以看到，里面有两个root，第一个root表示拥有者，第二个root表示用户组。

回到权限上来，三组权限中的

1. 第一组表示的是拥有者的权限；
2. 第二组表示拥有者所属的用户组的权限（也就是root组除了root外其它用户对这个文件具有怎样的操作权限）；
3. 第三组表示除了拥有者和拥有者所在组之外，其它用户的权限。

## 文件权限的修改

文件的权限可以通过命令```chmod```修改。这里说明常用的方法：

### 修改一个文件或者目录的权限：

    chmod 666 文件或目录

### 递归修改目录和目录下所有文件的权限：

    chmod -R 666 目录

