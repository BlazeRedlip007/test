## PHP变量，字符串类型

### 最简单的两种赋值方法，单、双引号

单引号包起来的就是字符串，无论涉及1个或者多个字符。单引号内只有单引号和转意符号本身前面的转意符号\有作用，除此之外的\都会当做普通字符处理。

### 双引号

php的双引号字符串支持的转意义字符比单引号多，具体这里不列出来了，要看的去找手册。说一下比较特别的，就是花括号的处理。

    $a = 100;
    echo "******$a*******" . PHP_EOL;
    echo "******{$a}*******";

程序输出的内容是

    ******100*******
    ******100*******

双括号是为了界定变量的边界，防止因为右边的字符导致变量名混淆。这在往连续的英文中间插入变量时有用。

还有另外一个可以使用花括号的定义方式是Heredoc。

### Heredoc

这种方式对转意要求跟双引号是一样的。不同的只是定义方法。它的定义从符号```<<<```开始，紧接着是一个我们自己定义的标示符，然后必须是换行符。

    $str = <<<MY_STRING
      这里面是字符串的内容，
      可以换行。
    不缩进也可以。
      这里面的东西完全照原样定义。
    MY_STRING;

需要注意，最后一行结束```MY_STRING;```只能自己单独一样，且前面不能有任何包括空格或tab缩进符号，后面出了分号;和换行符不能有任何字符。

这种定义里可以支持变量替换，花括号和其它双引号支持的转意符号。这种定义方式适合从一个地方拷贝大量的文本后粘贴到代码里面，然后快速地编写标签进行定义，并且替换其中某些变量。

还有一种方式跟这种方式差不多，就是Nowdoc。

### Nowdoc

这种方式定义时，起头的标识符用单引号括起来。除了像单引号定义一样不支持转意，其它的跟Heredoc是一样的。

    $str = <<<'MY_STRING'
      这里面是字符串的内容，
      可以换行。
    不缩进也可以。
      这里面的东西完全照原样定义。
    MY_STRING;

这种方法不会对里面的任何符号进行转意操作，适合定义大量原始文本。

## PHP的字符串编码

PHP的字符串编码为人诟病，它不支持Unicode。这与它的实现原理有关。在PHP的内部，字符串保存为一个每个元素都是一个字节的二进制数据的字符串的数组，以及保存这个字符串数组长度的整数。说白了只是一个二进制数据缓存区。

于是这些数据被作为字符串处理的时候，编码就以```.php```代码文件的字符编码为默认编码（除非开启Zend Multibyte）。

这种方式实际上就是把其它语言byte类型的变量当成字符串变量去用。这就是为何PHP没有byte类型，它把byte和string都当一类用了。所以二进制数据，比如```file_get_contents()```拿出来的东西，不管是不是文本都返回字符串类型。

PHP中许多函数有表示自己是非二进制安全的，原因在于二进制数据中处理到0x00就被当做字符串结束。

另外，如果需要将一个非默认编码字符串转换为默认字符串时就需要我们手动识别，然后处理了，非常麻烦。